<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Sección 4 Visualización de datos | Workshop: Tidyverse</title>
  <meta name="description" content="Sección 4 Visualización de datos | Workshop: Tidyverse" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Sección 4 Visualización de datos | Workshop: Tidyverse" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Sección 4 Visualización de datos | Workshop: Tidyverse" />
  
  
  

<meta name="author" content="María Reyes Retana" />


<meta name="date" content="2022-08-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulación-de-datos.html"/>

<script src="libs/header-attrs-2.11.3/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Workshop Tidyverse</a></li>

<li class="divider"></li>
<li><a href="index.html#workshop-introducción-a-tidyverse" id="toc-workshop-introducción-a-tidyverse"><span class="toc-section-number">1</span> Workshop: Introducción a tidyverse</a>
<ul>
<li><a href="index.html#primeros-pasos" id="toc-primeros-pasos"><span class="toc-section-number">1.1</span> Primeros pasos</a></li>
<li><a href="index.html#porqué-tidyverse" id="toc-porqué-tidyverse"><span class="toc-section-number">1.2</span> ¿Porqué Tidyverse?</a></li>
<li><a href="index.html#recursos-adicionales" id="toc-recursos-adicionales"><span class="toc-section-number">1.3</span> Recursos adicionales</a></li>
</ul></li>
<li><a href="análisis-preliminar.html#análisis-preliminar" id="toc-análisis-preliminar"><span class="toc-section-number">2</span> Análisis preliminar</a>
<ul>
<li><a href="análisis-preliminar.html#data-import" id="toc-data-import"><span class="toc-section-number">2.1</span> Data import</a></li>
<li><a href="análisis-preliminar.html#data-tidying" id="toc-data-tidying"><span class="toc-section-number">2.2</span> Data tidying</a></li>
</ul></li>
<li><a href="manipulación-de-datos.html#manipulación-de-datos" id="toc-manipulación-de-datos"><span class="toc-section-number">3</span> Manipulación de datos</a>
<ul>
<li><a href="manipulación-de-datos.html#modificar-data" id="toc-modificar-data"><span class="toc-section-number">3.1</span> Modificar data</a></li>
<li><a href="manipulación-de-datos.html#combinar-data" id="toc-combinar-data"><span class="toc-section-number">3.2</span> Combinar data</a></li>
</ul></li>
<li><a href="visualización-de-datos.html#visualización-de-datos" id="toc-visualización-de-datos"><span class="toc-section-number">4</span> Visualización de datos</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Workshop: Tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualización-de-datos" class="section level1" number="4">
<h1><span class="header-section-number">Sección 4</span> Visualización de datos</h1>
<p>La visualización de datos es una parte muy importante del análisis de estos.
Para múltiples gráficos podemos utilizar la librería de funciones para gráficas del Tidyverse.
Esta libraría se llama <code>ggplot2</code> que ya se cargó como parte de nuestros paquetes tidyverse.</p>
<p>Aquí les dejo la cheatsheet y una página súper útil de distintos gráficos.</p>
<ul>
<li><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">Data visualizacion</a></li>
</ul>
<p>Para esta serie de ejercicios vamos a cargar nuestro paquete de indicadores y aprovecharlo para graficar series. Esto se hace con <code>library(idbsocialdataR)</code> si ya lo tienes instalado.
Si no lo tienes instalado puedes correr <code>devtools::install_github("EL-BID/idbsocialdataR", force = TRUE)</code> aunque esto tomará un minuto aproximadamente.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="visualización-de-datos.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(idbsocialdataR)</span></code></pre></div>
<p>En <code>ggplot2</code> empezamos siempre con la instrucción <code>ggplot()</code> en la que especificamos la base de datos que vamos a utilizar. De ahí seguimos añadiendo distintas capas (+) como pueden ser el tipo de gráfica, o los labels, etc. con lo que iremos construyendo nuestra gráfica. las distintas capas van a tener asociado un <em>aes()</em> que es dónde definimos las variables que queremos gráfica y el atributo de la gráfica al que queremos asignarlas.</p>
<p>Dentro del paquete de ggplot2 tenemos distintos tipos de gráficos básicos como <code>geom_point()</code>, <code>geom_line()</code>, <code>geom_bar()</code>, <code>geom_boxplot()</code> que pueden utilizar para generar prácticamente todas las gráficas que se les ocurran.</p>
<p>Empecemos haciendo una query de los datos de mercados de tasa de ocupacion para la región de nuestro paquete de indicadores. Con esto podemos graficar rápidamente la diferencia entre las tasas de ocupación entre hombres y mujeres.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="visualización-de-datos.html#cb2-1" aria-hidden="true" tabindex="-1"></a>tasa_ocupacion <span class="ot">&lt;-</span> idbsocialdataR<span class="sc">::</span><span class="fu">query_indicator</span>(<span class="at">indicator =</span> <span class="st">&#39;tasa_ocupacion&#39;</span>, </span>
<span id="cb2-2"><a href="visualización-de-datos.html#cb2-2" aria-hidden="true" tabindex="-1"></a>                                                      <span class="at">categories =</span> <span class="st">&#39;sex,ethnicity&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="visualización-de-datos.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tasa_ocupacion <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="visualización-de-datos.html#cb3-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(ethnicity <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="visualización-de-datos.html#cb3-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span>(isoalpha3, sex, ethnicity) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="visualización-de-datos.html#cb3-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">slice</span>(<span class="fu">which.max</span>(year))) <span class="sc">+</span></span>
<span id="cb3-5"><a href="visualización-de-datos.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> isoalpha3, <span class="at">y =</span> value, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb3-6"><a href="visualización-de-datos.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>El mapeo de las propiedades estéticas depende del tipo de variable. Las variables discretas (sexo, región,
país).</p>
<table>
<colgroup>
<col width="30%" />
<col width="42%" />
<col width="27%" />
</colgroup>
<thead>
<tr class="header">
<th>aes</th>
<th>Discreta</th>
<th>Continua</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Color (<code>color</code>)</td>
<td>Arcoiris de colores</td>
<td>Gradiente de colores</td>
</tr>
<tr class="even">
<td>Tamaño (<code>size</code>)</td>
<td>Escala discreta de tamaños</td>
<td>Mapeo lineal entre el área y el valor</td>
</tr>
<tr class="odd">
<td>Forma (<code>shape</code>)</td>
<td>Distintas formas</td>
<td>No aplica</td>
</tr>
<tr class="even">
<td>Transparencia (<code>alpha</code>)</td>
<td>No aplica</td>
<td>Mapeo lineal a la transparencia</td>
</tr>
</tbody>
</table>
<p>Las gráficas también pueden ser utilices para mostrarnos relaciones. Por ejemplo podemos ver la relación entre violencia de género y tasa de ocupación femenina.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="visualización-de-datos.html#cb4-1" aria-hidden="true" tabindex="-1"></a>base_ipv <span class="ot">&lt;-</span> muerte_ipv <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="visualización-de-datos.html#cb4-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">group_by</span>(isoalpha3, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="visualización-de-datos.html#cb4-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">slice</span>(<span class="fu">which.max</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="visualización-de-datos.html#cb4-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">ipv =</span> value<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="visualización-de-datos.html#cb4-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">select</span>(isoalpha3, ipv, sex)</span>
<span id="cb4-6"><a href="visualización-de-datos.html#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="visualización-de-datos.html#cb4-7" aria-hidden="true" tabindex="-1"></a>base_part <span class="ot">&lt;-</span> tasa_ocupacion <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="visualización-de-datos.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ethnicity, sex, isoalpha3) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="visualización-de-datos.html#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">which.max</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-10"><a href="visualización-de-datos.html#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year) <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="visualización-de-datos.html#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ethnicity <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-12"><a href="visualización-de-datos.html#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tasa_ocupacion =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb4-13"><a href="visualización-de-datos.html#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(isoalpha3, tasa_ocupacion) <span class="sc">%&gt;%</span> </span>
<span id="cb4-14"><a href="visualización-de-datos.html#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(base_ipv) <span class="sc">%&gt;%</span> </span>
<span id="cb4-15"><a href="visualización-de-datos.html#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;woman&quot;</span>)</span>
<span id="cb4-16"><a href="visualización-de-datos.html#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="visualización-de-datos.html#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(base_part, <span class="fu">aes</span>(tasa_ocupacion, ipv)) <span class="sc">+</span></span>
<span id="cb4-18"><a href="visualización-de-datos.html#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb4-19"><a href="visualización-de-datos.html#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb4-20"><a href="visualización-de-datos.html#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-21"><a href="visualización-de-datos.html#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(tasa_ocupacion, ipv, <span class="at">label =</span> isoalpha3))</span></code></pre></div>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>En este caso la relación no parece muy consistente con lo que nos diría la teoria, pero también es útil para ver que parece no haber una relación en este caso.</p>
<p>La librería ggplot también es útil para analizar tendencias en distintos indicadores. Hagamos un ejemplo con como ha evolucionado la tasa de ocupacion en la región.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="visualización-de-datos.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tasa_ocupacion <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="visualización-de-datos.html#cb5-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(ethnicity <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="visualización-de-datos.html#cb5-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span>(sex, year) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="visualización-de-datos.html#cb5-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">summarise</span>(<span class="at">value_lac =</span> <span class="fu">mean</span>(value))) <span class="sc">+</span></span>
<span id="cb5-5"><a href="visualización-de-datos.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value_lac, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="visualización-de-datos.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Podemos tratar de identificar patrones por grupos de población y para esto puede ser útil utilizar paneles, que se puede añadir como una capa a la gráfica con <code>facet_grid()</code> o <code>facet_warp()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="visualización-de-datos.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tasa_ocupacion <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="visualización-de-datos.html#cb6-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span>(sex, year, ethnicity) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="visualización-de-datos.html#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">summarise</span>(<span class="at">value_lac =</span> <span class="fu">mean</span>(value)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="visualización-de-datos.html#cb6-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(ethnicity <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>)) <span class="sc">+</span></span>
<span id="cb6-5"><a href="visualización-de-datos.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value_lac, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="visualización-de-datos.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-7"><a href="visualización-de-datos.html#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ethnicity) </span></code></pre></div>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>También se puede hacer más bonita la gráfica arreglando los colores, tipo de letra y distintos aes(). Por ejemplo utilicemos la base resultante del ejercicio 3</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="visualización-de-datos.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(extrafont)</span>
<span id="cb7-2"><a href="visualización-de-datos.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="visualización-de-datos.html#cb7-3" aria-hidden="true" tabindex="-1"></a>colors_sex <span class="ot">&lt;-</span> colors_sex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;#176A7B&#39;</span>, <span class="st">&#39;#C8DA92&#39;</span>)</span>
<span id="cb7-4"><a href="visualización-de-datos.html#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="visualización-de-datos.html#cb7-5" aria-hidden="true" tabindex="-1"></a>mental_indicators_diff <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="visualización-de-datos.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb7-7"><a href="visualización-de-datos.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(indicator, women), <span class="at">xend=</span><span class="fu">fct_reorder</span>(indicator, women), <span class="at">y=</span>men, <span class="at">yend =</span> women), <span class="at">color =</span> <span class="st">&quot;dark grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="visualización-de-datos.html#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>indicator, <span class="at">y=</span>men, <span class="at">color =</span> <span class="st">&quot;men&quot;</span>),  <span class="at">size=</span><span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="visualización-de-datos.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data  =</span>  mental_indicators_diff,</span>
<span id="cb7-10"><a href="visualización-de-datos.html#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x=</span>indicator, <span class="at">y=</span>gap_pos, <span class="at">label=</span>scales<span class="sc">::</span><span class="fu">comma</span>(diff,<span class="at">accuracy =</span> .<span class="dv">1</span>)),</span>
<span id="cb7-11"><a href="visualización-de-datos.html#cb7-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">&#39;Century Gothic&#39;</span>,</span>
<span id="cb7-12"><a href="visualización-de-datos.html#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">nudge_x =</span> .<span class="dv">1</span>,</span>
<span id="cb7-13"><a href="visualización-de-datos.html#cb7-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-14"><a href="visualización-de-datos.html#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>indicator, <span class="at">y=</span>women, <span class="at">color =</span> <span class="st">&quot;women&quot;</span>),  <span class="at">size=</span><span class="fl">2.5</span>, <span class="at">alpha =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb7-15"><a href="visualización-de-datos.html#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Difference in mental health indicators by gender&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-16"><a href="visualización-de-datos.html#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>, </span>
<span id="cb7-17"><a href="visualización-de-datos.html#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-18"><a href="visualización-de-datos.html#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb7-19"><a href="visualización-de-datos.html#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title=</span><span class="fu">element_blank</span>(),<span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-20"><a href="visualización-de-datos.html#cb7-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),</span>
<span id="cb7-21"><a href="visualización-de-datos.html#cb7-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">color =</span> <span class="st">&quot;#000f1c&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">family =</span> <span class="st">&#39;Century Gothic&#39;</span>),</span>
<span id="cb7-22"><a href="visualización-de-datos.html#cb7-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">color =</span> <span class="st">&quot;#000f1c&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">family =</span> <span class="st">&#39;Century Gothic&#39;</span>),</span>
<span id="cb7-23"><a href="visualización-de-datos.html#cb7-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;#D3D3D3&quot;</span>),</span>
<span id="cb7-24"><a href="visualización-de-datos.html#cb7-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, <span class="at">color =</span> <span class="st">&quot;#000f1c&quot;</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">family =</span> <span class="st">&#39;Century Gothic&#39;</span>)) <span class="sc">+</span></span>
<span id="cb7-25"><a href="visualización-de-datos.html#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> colors_sex) <span class="sc">+</span></span>
<span id="cb7-26"><a href="visualización-de-datos.html#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb7-27"><a href="visualización-de-datos.html#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Ejercicio final (10 minutos): usando lo que aprendimos calcula y grafica cual fue el país que tuvo una caída más grande en la tasa de participación femenina de 2019 a 2020. También determina si esto cambia por etnicidad.</p>
<ul>
<li><p>Tip 1: Toma en cuenta que la última encuesta de CHL y México antes de 2020 fue 2017 y 2018, respectivamente.</p></li>
<li><p>Tip 2: la función lag() encuentra el valor inmediato anterior (no es la única forma de hacerlo).</p></li>
</ul>
<p><img src="Workshop-tidyverse_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulación-de-datos.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
